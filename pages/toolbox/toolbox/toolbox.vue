<template>
	<view>
	<!-- ğŸ”¥é€‰æ‹©æ¡† -->
	<view class="">
		<u-dropdown ref="uDropdown" @open="open" @close="close">
			<u-dropdown-item v-model="selection" :title="options1[0].label" :options="options1"></u-dropdown-item>
			
		</u-dropdown>
	</view>
		<!-- ğŸ”¥æœç´¢æ¡† -->
		<u-search placeholder="ä½ æƒ³æœçš„å†…å®¹" v-model="keyword"></u-search>
		<!-- ğŸ”¥è·å–æ•°æ® -->
		<!-- ğŸ”¥æ•°æ®ç§ç±»åˆ¤æ–­ -->
		<block v-if="selection==0">
			
		
		<!-- ğŸ”¥å¾ªç¯æ•°æ®  ğŸš€å¡ç‰‡å¼€å§‹ -->
		<block v-for="(card,index) in cards" :key="index">
				<view class="cu-list menu-avatar comment solids-top">
					<view class="cu-item">
						<view class="cu-avatar round" style="background-image:url(https://ossweb-img.qq.com/images/lol/img/champion/Morgana.png);"></view>
						<view class="content">
							<view class="text-grey">æ‰¿åŒ…å•ä½ï¼š{{card.æ–½å·¥æ€»æ‰¿åŒ…å•ä½åç§°}}</view>
							<view class="text-gray text-content text-df">å·¥ç¨‹é€ ä»· ï¼š{{card.å·¥ç¨‹é€ ä»·}}</view>
							<view class="text-gray text-content text-df">æ–½å·¥å•ä½ ï¼š{{card.æ–½å·¥æ€»æ‰¿åŒ…å•ä½åç§°}}</view>
							
							<view class="bg-grey padding-sm radius margin-top-sm  text-sm">
								<view class="flex">
									<view>å·¥ç¨‹åç§°ï¼š</view>
									<view class="flex-sub">{{card.å·¥ç¨‹é¡¹ç›®åç§°}}</view>
									</view>
									<view class="flex">
									<view>é¡¹ç›®è®¸å¯å·ï¼š</view>
									<view class="flex-sub">{{card.æ–½å·¥è®¸å¯è¯å·}}</view>
								</view>
							</view>

							<view class="margin-top-sm flex justify-between">
								<view class="text-gray text-df">å¼€å·¥æ—¥æœŸ:{{card.å¼€å·¥æ—¥æœŸ}}</view>
							</view>
						</view>
					</view>
				</view>
		</block>
		  <!-- ğŸ”¥å¾ªç¯ç»“æŸ	 ğŸš€å¡ç‰‡ç»“æŸ-->
		</block>
		
		<!-- ğŸ”¥æ•°æ®ç§ç±»åˆ¤æ–­ -->
		<block v-if="selection==0">
			
		
		<!-- ğŸ”¥å¾ªç¯æ•°æ®  ğŸš€å¡ç‰‡å¼€å§‹ -->
		<block v-for="(card,index) in cards" :key="index">
				<view class="cu-list menu-avatar comment solids-top">
					<view class="cu-item">
						<view class="cu-avatar round" style="background-image:url(https://ossweb-img.qq.com/images/lol/img/champion/Morgana.png);"></view>
						<view class="content">
							<view class="text-grey">æ‰¿åŒ…å•ä½ï¼š{{card.æ–½å·¥æ€»æ‰¿åŒ…å•ä½åç§°}}</view>
							<view class="text-gray text-content text-df">å·¥ç¨‹é€ ä»· ï¼š{{card.å·¥ç¨‹é€ ä»·}}</view>
							<view class="text-gray text-content text-df">æ–½å·¥å•ä½ ï¼š{{card.æ–½å·¥æ€»æ‰¿åŒ…å•ä½åç§°}}</view>
							
							<view class="bg-grey padding-sm radius margin-top-sm  text-sm">
								<view class="flex">
									<view>å·¥ç¨‹åç§°ï¼š</view>
									<view class="flex-sub">{{card.å·¥ç¨‹é¡¹ç›®åç§°}}</view>
									</view>
									<view class="flex">
									<view>é¡¹ç›®è®¸å¯å·ï¼š</view>
									<view class="flex-sub">{{card.æ–½å·¥è®¸å¯è¯å·}}</view>
								</view>
							</view>
		
							<view class="margin-top-sm flex justify-between">
								<view class="text-gray text-df">å¼€å·¥æ—¥æœŸ:{{card.å¼€å·¥æ—¥æœŸ}}</view>
							</view>
						</view>
					</view>
				</view>
		</block>
		  <!-- ğŸ”¥å¾ªç¯ç»“æŸ	 ğŸš€å¡ç‰‡ç»“æŸ-->
		</block>
	
	
	</view>
</template>

<script>
	export default {
		data() {
			return {
				
				//ğŸ”¥åŸºç¡€URL
				baseUrl:"https://test-server.build-dream.cn",
				//é€‰æ‹©
			    selection: 1,
				options1: [{
						label: 'æµ™æ±Ÿåœ¨å»ºå·¥åœ°ä¿¡æ¯',
						value: 1,
					},
					{
						label: 'æµ™æ±Ÿåœ¨å»ºå·¥ç¨‹ä¿¡æ¯',
						value: 2,
					},
					{
						label: 'æœ€æ–°æ‹›æ ‡ä¿¡æ¯',
						value: 3,
					}
				],
				//æœç´¢
				keyword: '',
				//å¡ç‰‡
				cardTittle: 'å¡ç‰‡å†…å®¹',
				
				cards: [
				{
                    "mID": 1,
                    "å·¥ç¨‹é€ ä»·(ä¸‡å…ƒ)": "æš‚æ— æ•°æ®",
                    "å·¥ç¨‹é¡¹ç›®åç§°": "æš‚æ— æ•°æ®",
                    "å»ºè®¾å•ä½åç§°": "æš‚æ— æ•°æ®",
                    "å»ºè®¾å•ä½ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ": "æš‚æ— æ•°æ®",
                    "å¼€å·¥æ—¥æœŸ":"æš‚æ— æ•°æ®",
                    "æ‰€å±åŒºå¿": "æš‚æ— æ•°æ®",
                    "æ‰€å±å¸‚": "æš‚æ— æ•°æ®",
                    "æ–½å·¥æ€»æ‰¿åŒ…å•ä½åç§°": "æš‚æ— æ•°æ®",
                    "æ–½å·¥æ€»æ‰¿åŒ…å•ä½ç»Ÿä¸€ç¤¾ä¼šä¿¡ç”¨ä»£ç ": "æš‚æ— æ•°æ®",
                    "æ–½å·¥è®¸å¯è¯å·": "æš‚æ— æ•°æ®",
                    "é¡¹ç›®åœ°å€": "æš‚æ— æ•°æ®",
                    "é¡¹ç›®ç»ç†": "æš‚æ— æ•°æ®",
                    "é¡¹ç›®åŸºæœ¬ä¿¡æ¯ä¸»é”®ID": "æš‚æ— æ•°æ®",
                    "å‘è¯æ—¶é—´": "æš‚æ— æ•°æ®"
                },
				],
				rowData:null,
				
			}
		},
		methods: {
			
			/**
			 * ğŸš€è·å–æ¥å£åˆ—è¡¨
			 */
			getList(){
				var _this=this;
				return new Promise((resolve) => {
				uni.request({
				    url: this.baseUrl+'/api/select/list', 
				    data: {
				        text: 'uni.request'
				    },
				    header: {
				        //'custom-header': 'hello' //è‡ªå®šä¹‰è¯·æ±‚å¤´ä¿¡æ¯
				    },
				    success: (res) => {
							var i = 0 ;
				        for(var key in res.data.data){
								
							var tmp = {
								label: key,
								value: i+1,
							}
							_this.options1[i]=tmp,
							i++;
						}
						_this.rowData=res.data.data;
						console.log(_this.options1)
						resolve('suc');
					    _this.$forceUpdate();
						_this.selection=0;
						
				    }
				});
				})
			},
			/**
			 * ğŸ”¥å¼‚æ­¥è°ƒç”¨
			 */
					async getrequest(){
						await this.getList();
					},
					
					
						open(index) {
							// å±•å¼€æŸä¸ªä¸‹æ¥èœå•æ—¶ï¼Œå…ˆå…³é—­åŸæ¥çš„å…¶ä»–èœå•çš„é«˜äº®
							// åŒæ—¶å†…éƒ¨ä¼šè‡ªåŠ¨ç»™å½“å‰å±•å¼€é¡¹è¿›è¡Œé«˜äº®
							this.$refs.uDropdown.highlight();
						},
						close(index) {
							// å…³é—­çš„æ—¶å€™ï¼Œç»™å½“å‰é¡¹åŠ ä¸Šé«˜äº®
							// å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ç›‘å¬dropdown-itemçš„@changeäº‹ä»¶è¿›è¡Œå¤„ç†
							this.$refs.uDropdown.highlight(index);
							var key=this.options1[this.selection-1].label;
							console.log(key);
							
							//ğŸ”¥æ¯”å¯¹
							console.log(this.rowData[key])
							
						},
						change() {
						
						},
						
		getdata(url){
			uni.request({
			    url:  url, //ä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶éçœŸå®æ¥å£åœ°å€ã€‚
			    data: {
			        text: 'uni.request'
			    },
			    header: {
			        //'custom-header': 'hello' //è‡ªå®šä¹‰è¯·æ±‚å¤´ä¿¡æ¯
			    },
			    success: (res) => {
			        
			        console.log(res.data.data.items.data);
					this.cards=res.data.data.items.data;
			    }
			});
		}
			
		},
		
		onLoad: function(options) {
			
			
			this.getdata("http://test-server.build-dream.cn/api/project/information");

		},
		onShow() {
			
console.log(this.getrequest())
		},
	}
</script>

<style>

</style>
